<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Midterms</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body style="background-color: rgba(66, 66, 66, 1); background-image: url(https://dmarket.com/blog/best-dota2-wallpapers/dota2heroes3_hu3043563290790956756.jpg);">
  <div class="container">
    <div class="row mt-5" style="opacity: 0.7;">
      <div class="col-12-lg p-5">
        <div class="d-flex">
          <input type="text" class="p-3 form-control" placeholder="Search by Hero Name"
            style="border-radius: 100px 0px 0px 100px" id="searchBar">
          <button class="btn btn-secondary" style="border-radius: 0px 100px 100px 0px" onclick="loadHero()">
            Search
          </button>
        </div>
      </div>
    </div>
    <div class="row my-5">
      <div class="col">
        <div class="container rounded-5 py-5 text-center" style="background-color: white; opacity: 0.7;">
          <div class="h1 my-3" id="heroName">Hero Name</div>
          <div class="h5 text-muted" id="heroPrimary_Attr">Primary Attribute: --</div>
          <div class="h5 text-muted" id="heroAttack_Type">Attack Type: --</div>
          <div class="h5 text-muted" id="heroRoles">Roles: --</div>
          <div class="h5 text-muted" id="heroLegs">Legs: --</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Elements for hero details
    const heroName = document.getElementById("heroName");
    const heroPrimary_Attr = document.getElementById("heroPrimary_Attr");
    const heroAttack_Type = document.getElementById("heroAttack_Type");
    const heroRoles = document.getElementById("heroRoles");
    const heroLegs = document.getElementById("heroLegs");

    const loadHero = async () => {
      const searchTerm = document.getElementById("searchBar").value.toLowerCase();

      try {
        // Fetch data from OpenDota API
        const response = await fetch("https://api.opendota.com/api/heroes");
        const heroes = await response.json();

        // Find the hero based on the search term
        const hero = heroes.find(h => h.localized_name.toLowerCase().includes(searchTerm));

        if (hero) {
          // Update hero details
          heroName.innerHTML = hero.localized_name;
          heroPrimary_Attr.innerHTML = `Primary Attribute: ${hero.primary_attr}`;
          heroAttack_Type.innerHTML = `Attack Type: ${hero.attack_type}`;
          heroRoles.innerHTML = `Roles: ${hero.roles.join(", ")}`;
          heroLegs.innerHTML = `Legs: ${hero.legs}`;
        } else {
          // Display "Hero Not Found" message
          heroName.innerHTML = "Hero Not Found";
          heroPrimary_Attr.innerHTML = "Primary Attribute: --";
          heroAttack_Type.innerHTML = "Attack Type: --";
          heroRoles.innerHTML = "Roles: --";
          heroLegs.innerHTML = "Legs: --";
        }
      } catch (error) {
        console.error("Error fetching hero data:", error);

        // Handle error case
        heroName.innerHTML = "Error Loading Hero";
        heroPrimary_Attr.innerHTML = "Primary Attribute: --";
        heroAttack_Type.innerHTML = "Attack Type: --";
        heroRoles.innerHTML = "Roles: --";
        heroLegs.innerHTML = "Legs: --";
      }
    };
  </script>
</body>

</html>
